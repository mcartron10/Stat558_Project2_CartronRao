---
title: "Project 2 F Stat 558"
author: "Cartron and Rao"
date: "9/30/2022"
output: github_document
---


##API code sample structure

```{r}
library(httr)
mydata<-GET("https://api.spoonacular.com/recipes/complexSearch?query=pasta&maxFat=25&number=2&apiKey=55fcdcfd9f374fa3adb1246f5c30c78b")
library(dplyr)
library(jsonlite)
parsed <- fromJSON(rawToChar(mydata$content))
str(parsed, max.level = 1)
parsed$results %>%
  colnames()

parsed$results$title[2] 
```
 
Now let's create custom functions to call in data from the API.

```{r}
get_recipe <- function(key, query, maxCarbs, minCarbs) {

param_list <- list(apiKey = key, query = NULL, maxCarbs = maxCarbs, minCarbs = minCarbs) 
  
base_url <- "https://api.spoonacular.com/recipes/complexSearch"
recipe_dat <- GET(paste(base_url), query = param_list)

parsed <- fromJSON(rawToChar(recipe_dat$content), flatten = TRUE)

return(parsed)
  
}
  

#Below was what inspired the function above. Still some issues to work out. 
recipes <- GET("https://api.spoonacular.com/recipes/complexSearch?apiKey=e565b5df568f4b3fa1f5a044377e989a")
df_recipe_initial <- jsonlite::fromJSON(rawToChar(recipe_nutrition$content), flatten = TRUE)

df_recipe <- df_recipe_initial$results
df_recipe

```

```{r}
#get_recipe(e565b5df568f4b3fa1f5a044377e989a, 1000, 200)
```


